# Обзор VSURF

@Metadata {
    @PageKind(article)
    @Available(iOS, introduced: "16.0")
}

**VSURF** 
: архитектура для построения приложений на платформе **iOS** с использованием SwiftUI. Она представляет собой набор практик и инструментов, которые позволяют создавать приложения, отличающиеся легкостью в поддержке и развитии.

`SwiftUI` фундаментально отличается от `UIKit`, и поэтому требует своего подхода к архитектуре. Всем известные **MVP**, **MVVM**, наша **SurfMVP** и прочие подходы не адаптированы под особенности `SwiftUI`. Поэтому мы создали **VSURF**.

В основе архитектуры правила формирования `ViewState` для `SwiftUI.View` и принципы работы с ними.
Кроме того, мы планировали сделать **VSURF** таким же гибким и расширяемым, как конструктор **LEGO**, чтобы модули можно было комбинировать и переиспользовать.

## Описание архитектуры

**VSURF** имеет вертикальные уровни и горизонтальные уровни для модулей. Каждый уровень отвечает за свою часть приложения. 

@TabNavigator {
    @Tab(Вертикальные) {
        Каждый уровень соответствует определенной зоне ответственности.
        
        Core -> Generated -> Middle -> Feature -> Flow Logic -> Flow UI -> App
        
        @Image(source: vertical-layers.png, alt: "Вертиклаьные уровни")
    }
    @Tab(Горизонтальные) {
        @Row {
            @Column(size: 2) {
                Есть два уровня: Appearance и Logic.
                
                Appearance для UI модулей c версткой и ресурсами.
                
                Logic для модулей с бизнес-логикой и логикой работы с фреймворками.
                
                Финальным результатом каждого уровня являются модули
                
                - FlowState для Logic
                - FlowView для Appearance

                Таким образом, на вертикальном Flow уровне Appearance и Logic объединяются в один модуль.
            }
            @Column {
                @Image(source: horizontal-layers.png, alt: "Горизонтальные уровни")
            }
        }
    }
}

- Warning: Модули одного уровня не должны зависеть друг от друга.

## Разделение на уровни обеспечивает 
- легкость поддержки
- возможность переиспользования модулей
- уменьшение зависимостей
- улучшение производительности

## Подробнее про каждый уровень
@Links(visualStyle: list) {
    - <doc:Core>
    - <doc:Generated>
    - <doc:Middle>
    - <doc:Feature>
    - <doc:FlowState>
    - <doc:FlowUI>
    - <doc:App>
}

## Обучающие материалы

### Связь между модулями и View

@Links(visualStyle: list) {
    - <doc:Facade>
    - <doc:Environment+Weak>
    - <doc:Signals>
}

### Внутренний и внешний State

@Links(visualStyle: list) {
    - <doc:State-vs-Binding>
    - <doc:ViewState-+-ViewStateHolder>
}

### Навигация

@Links(visualStyle: list) {
    - <doc:NavigationState>
}
